# Wi-Fi固定IPアドレス設定 完全ガイド

## 🎯 設定の目的
Wi-Fi接続でMac miniサーバーに固定IPアドレスを設定し、安定したサーバー運用を実現します。

## 📱 Wi-Fi環境での設定手順

### ステップ1: システム環境設定を開く
1. **Appleメニュー** (🍎) をクリック
2. **システム環境設定** を選択
3. **ネットワーク** アイコンをクリック

### ステップ2: Wi-Fi設定にアクセス
1. 左側のリストで **Wi-Fi** を選択
2. 「状況: 接続済み」と表示されることを確認
3. **詳細...** ボタンをクリック

### ステップ3: TCP/IP設定を変更
1. **TCP/IP** タブをクリック
2. **IPv4の設定** のプルダウンを開く
3. **「DHCPサーバを使用」** から **「手動」** に変更

### ステップ4: 固定IPアドレスを入力
以下の値を正確に入力してください：

```
IPアドレス:     192.168.151.100
サブネットマスク: 255.255.254.0
ルーター:       192.168.150.1
```

### ステップ5: DNS設定（重要）
1. **DNS** タブをクリック
2. **+** ボタンをクリックして以下を追加:
   ```
   8.8.8.8      (Google DNS プライマリ)
   8.8.4.4      (Google DNS セカンダリ)
   1.1.1.1      (Cloudflare DNS)
   ```

### ステップ6: 設定を保存・適用
1. **OK** ボタンをクリック
2. **適用** ボタンをクリック
3. 管理者パスワードを入力（要求された場合）

## 🔧 設定後の確認作業

### 1. 即座に確認
```bash
# 新しいIPアドレスが反映されているか確認
ifconfig | grep "inet " | grep -v 127.0.0.1

# 期待する結果: inet 192.168.151.100
```

### 2. 接続テスト
```bash
# インターネット接続確認
ping -c 4 8.8.8.8

# ルーターとの通信確認
ping -c 4 192.168.150.1

# DNSテスト
nslookup google.com
```

### 3. サーバーアクセステスト
```bash
# 現在のサーバーを停止（必要に応じて）
./stop-server.sh

# サーバー再起動
./start-secure.sh
```

## 🎯 Wi-Fi固定IP使用時の利点

### サーバー運用での利点
1. **安定したアクセス**: 常に同じIPでアクセス可能
2. **外部アクセス設定**: ポート転送設定が簡単
3. **監視システム**: IPアドレス変更によるサービス中断なし
4. **SSL証明書**: 固定IPでの証明書発行が可能

### アクセス方法（設定後）
```bash
# ローカルネットワーク内から
http://192.168.151.100:8080

# 他のデバイスから（スマホ、PC等）
http://192.168.151.100:8080
```

## ⚠️ Wi-Fi環境での注意点

### 1. Wi-Fi信号強度の確保
- Mac miniをルーターに近い場所に設置
- 障害物を少なくする
- 必要に応じてWi-Fi中継器を使用

### 2. 電源管理設定
```bash
# Wi-Fi電源管理を無効化（安定性向上）
sudo pmset -a womp 0
sudo pmset -a powernap 0
```

### 3. Wi-Fi接続の監視
```bash
# Wi-Fi接続状態を確認
networksetup -getairportnetwork en0

# Wi-Fi信号強度確認
/System/Library/PrivateFrameworks/Apple80211.framework/Versions/Current/Resources/airport -I
```

## 🚨 トラブルシューティング

### 接続できない場合
1. **Wi-Fi再接続**
   ```bash
   # Wi-Fi一時的に切断・再接続
   networksetup -setairportpower en0 off
   sleep 5
   networksetup -setairportpower en0 on
   ```

2. **DHCP設定に戻す**
   - システム環境設定 → ネットワーク → Wi-Fi
   - IPv4の設定を「DHCPサーバを使用」に変更

3. **ネットワーク設定リセット**
   ```bash
   sudo dscacheutil -flushcache
   sudo killall -HUP mDNSResponder
   ```

## ✅ 設定完了チェックリスト

- [ ] Wi-Fi接続確認
- [ ] 固定IPアドレス設定完了 (192.168.151.100)
- [ ] DNS設定完了
- [ ] インターネット接続確認
- [ ] サーバーアクセステスト完了
- [ ] 他デバイスからのアクセス確認

## 🎉 設定完了後の作業

設定が完了したら、以下のコマンドでサーバーの動作を確認してください：

```bash
# 現在のIPアドレス確認
ifconfig | grep "inet " | grep -v 127.0.0.1

# サーバー起動
./start-secure.sh

# ブラウザでアクセス
open http://192.168.151.100:8080
```

これでWi-Fi環境でのMac miniサーバー運用準備が完了です！🎯
